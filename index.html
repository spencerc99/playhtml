<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/png" href="/icon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="interactive, collaborative html elements with a single attribute"
    />
    <meta name="og:image" content="https://playhtml.fun/playhtml.png" />

    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Carter+One&family=Play:wght@400;700&family=Rubik+Pixels&family=Yellowtail&display=swap"
      rel="stylesheet"
    />

    <title>playhtml</title>
    <script
      defer
      data-domain="playhtml.fun"
      data-api="https://sharingan.spencerc99.workers.dev/genjutsu/event"
      src="https://sharingan.spencerc99.workers.dev/genjutsu/script.js"
    ></script>
  </head>
  <body>
    <div id="app">
      <div can-move id="sign">in beta</div>

      <img
        src="https://spencerchang.me/assets/name-stamp.png"
        can-spin
        id="stamp"
      />

      <div id="plantContainer" can-move>
        <div id="plant" can-grow></div>
        <div class="pot"></div>
      </div>

      <div class="content">
        <div class="topSpacer" />
        <h1>
          play<span class="letter" id="h" can-toggle>h</span
          ><span class="letter" id="t" can-toggle>t</span
          ><span class="letter" id="m" can-toggle>m</span
          ><span class="letter" id="l" can-toggle>l</span>
        </h1>
        <div id="lampContainer">
          <img
            class="lamp"
            id="lamp-hanging"
            src="/noguchi-hanging-lamp.png"
            can-toggle
          />
        </div>
        <img
          class="lamp"
          id="lamp-akari"
          src="/noguchi-akari-a1.png"
          can-toggle
        />
        <i>interactive, collaborative html elements with a single attribute.</i>
        <p>
          <b>playhtml</b> is an
          <a href="https://github.com/spencerc99/playhtml"
            >open-source library</a
          >
          that enables interactive capabilities with minimal code and maximal
          expressiveness by handling real-time syncing, persistence, and
          reactivity.
        </p>
        <p>
          Check out some examples from the community in the
          <a href="https://coda.io/@spencer/playhtml">gallery</a> and
          <a href="https://coda.io/form/playhtml-example_dnUR7xNE7wz"
            >submit your own</a
          >!
        </p>
        <p>
          most of the HTML elements on this page are collaboratively
          interactive! Trying clicking, dragging, and playing around with them.
          If anyone else is on the site, you'll see their cursors and how
          they're playing with the elements too.
          <!-- TODO: add a button that actives an AI cursor??? -->
        </p>
        <p>
          Get started by adding the preset tags to any HTML element on your
          website. This is how easy it is to get a movable couch:
          <code>&lt;div id=&quot;couch&quot; can-move&gt;üõã&lt;/div&gt; </code>.
          <div id="couch" can-move style="font-size: 80px; position: absolute; right: -80px; z-index: 1;">üõã</div>
        </p>
        <h2>existing tags</h2>
        <!-- candle credit: https://nyknck.itch.io/candle -->
        <img
          can-play
          can-move
          id="customCandle"
          src="/candle-gif.gif"
          class="candle"
        />

        <!-- Set data for custom (can-play) playhtml elements -->
        <!-- IMPORTANT: this data must be set _before_ importing the playhtml library. -->
        <script>
          const candle = document.getElementById("customCandle");
          candle.defaultData = {on: true};
          candle.onClick = (_e, { data, setData }) => {
            setData({on: !data.on});
          };
          candle.updateElement = ({ element, data }) => {
            element.src = data.on ? "/candle-gif.gif" : "/candle-off.png";
          };
          candle.resetShortcut = "shiftKey";
        </script>

        <script>
          function highlightElements(capability) {
            document.querySelectorAll(`[${capability}]`).forEach((ele) => {
              ele.classList.add("highlighted");
            });
          }

          function unhighlightElements(capability) {
            document.querySelectorAll(`[${capability}]`).forEach((ele) => {
              ele.classList.remove("highlighted");
            });
          }
        </script>

        <ol class="capabilities">
          <!-- TODO: move this into React to dynamically update -->
          <li
            onmouseenter="highlightElements('can-play')"
            onmouseleave="unhighlightElements('can-play')"
          >
            can-play (custom capabilities
            <a href="https://github.com/spencerc99/playhtml#can-play"
              >with your code</a
            >!)
            <img class="code" src="/playhtml-can-play.png" />
          </li>
          <!-- TODO: spotlight elements on the page that match these on hover -->
          <li
            onmouseenter="highlightElements('can-move')"
            onmouseleave="unhighlightElements('can-move')"
          >
            can-move
            <img class="code" src="/playhtml-sign.png" />
          </li>
          <li
            onmouseenter="highlightElements('can-toggle')"
            onmouseleave="unhighlightElements('can-toggle')"
          >
            can-toggle <img class="code" src="/playhtml-can-toggle.png" />
          </li>
          <li>can-duplicate</li>
          <li
            onmouseenter="highlightElements('can-spin')"
            onmouseleave="unhighlightElements('can-spin')"
          >
            can-spin <img class="code" src="/playhtml-can-spin.png" />
          </li>
          <li
            onmouseenter="highlightElements('can-grow')"
            onmouseleave="unhighlightElements('can-grow')"
          >
            can-grow
          </li>
          <li>
            <a href="https://github.com/spencerc99/playhtml/pulls"
              >yours-here</a
            >
          </li>
        </ol>
        <p>You can also try it out by playing some of the games...</p>
        <ol>
          <li><a href="/story.html">one word story</a></li>
          <li><a href="/fridge.html">fridge poetry</a></li>
          <li><a href="/candles.html">candle factory</a></li>
          <li>communal garden (coming soon)</li>
          <li>puzzle (coming soon)</li>
        </ol>
        <p>
          I'd love for you to try this out and make your websites
          collaboratively interactive and feel <i>alive</i> like a lot of
          physical spaces do. If you do make something,
          <a href="mailto:spencerc99@gmail.com">message me</a>!
        </p>
        <details>
          <summary><h3 style="display: inline">the lore</h3></summary>
          <p>
            This project started out as a way to explore how I could make
            collective interactive design more accessible to people who just
            know basic HTML and CSS and create weird, personal internet sites
            (see <a href="https://html.energy">html.energy</a>). In
            <a href="https://we-b.site/">(we)bsite</a>, we tried out a lot of
            new interaction mechanisms for collective space-making but it
            involved syncing state, creating a database to store history, and
            handling all the nitty gritty of manipulating HTML elements.
          </p>
          <p>
            I hope <b>playhtml</b> helps play a role in making the web a space
            for everyone to shape, change, and maintain.
          </p>
        </details>
        <hr />
        <div id="reactContent"></div>
        <div id="guestbook">
          <form id="guestbookForm" can-post>
            <input
              class="inline"
              type="text"
              name="name"
              placeholder="your name"
              style="width: 80px"
              required
            />,
            <span>
                leave something nice for visitors in the guestbook, won't
                you?</span
            >

            <br />
            <!-- emoji message -->
            <input
              class="inputMessage"
              type="text"
              name="message"
              placeholder="5 chars max, emojis recommended"
              maxlength="5"
            />
            <button type="submit" >üñãÔ∏è</button>
          </form>
          <div id="guestbookMessages"></div>
        </div>
        <script>
          // TODO: convert the guestbook to react and make the hook to make that possible
          function saveName(e) {
            localStorage.setItem("name", JSON.stringify(e.currentTarget.value));
          }

          const nameInput = document.getElementsByName("name")[0];
          nameInput.value = localStorage.getItem("name")
            ? JSON.parse(localStorage.getItem("name"))
            : "";
          nameInput.addEventListener("change", saveName);
        </script>
      </div>
    </div>
    <footer>
      <div>
        an open-source library created and maintained by
        <a href="https://www.spencerchang.me/">spencer</a>, powered by
        <a href="https://partykit.io">partykit</a>
      </div>
    </footer>

    <script type="module" src="./index.tsx">
    </script>
    <!-- import cursor chat -->
    <!-- TODO: implement custom cursor chat with color select, other settings -->
    <div id="cursor-chat-layer">
      <input type="text" id="cursor-chat-box" />
    </div>
    <script type="module">
      import { initCursorChat } from "https://esm.sh/cursor-chat";
      initCursorChat(window.location.href);
    </script>
    <link
      rel="stylesheet"
      type="text/css"
      href="https://unpkg.com/cursor-chat/dist/style.css"
    />
  </body>
</html>
