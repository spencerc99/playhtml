<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/png" href="/icon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="one word story powered by playhtml" />
    <meta name="og:image" content="https://playhtml.fun/playhtml-story.png" />

    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Carter+One&family=Play:wght@400;700&family=Rubik+Pixels&family=Yellowtail&display=swap"
      rel="stylesheet"
    />

    <title>playhtml</title>
    <script
      defer
      data-domain="playhtml.fun"
      data-api="https://sharingan.spencerc99.workers.dev/genjutsu/event"
      src="https://sharingan.spencerc99.workers.dev/genjutsu/script.js"
    ></script>
  </head>
  <body>
    <div id="app">
      <div class="content">
        <h1>one word story</h1>
        <i>a game powered by <a href="/">playhtml</a></i>
        <p>let's play a game and make a story together!</p>
        <ol>
          <li>
            <p>
              Try to only add a few words every 24 hours to make space for
              others to "yes and" you.
            </p>
          </li>
          <li>
            <p>
              Before you start, choose a color so you can be associated with it
              :)
              <input
                id="colorPicker"
                type="color"
                onChange="updateUserColor(this.value)"
              />
            </p>
          </li>
          <li>
            <p>
              Contribute by clicking the mail button or hitting
              <kbd>Enter</kbd> while editing the input.
            </p>
          </li>
          <li>
            <p>Come back to see how it evolves.</p>
          </li>
        </ol>
        <br />
        <h3>
          our story<br />
          <i>last updated <span id="lastUpdatedTime"></span></i>
          <span style="float: right"
            ><span id="activeOrb"></span>
            <span id="activeUsersCount">1</span> active users</span
          >
        </h3>
        <p id="story">
          Once upon a time,
          <span id="storyContent"></span>
          <input
            id="wordInput"
            type="text"
            placeholder="your story word..."
            maxlength="20"
            can-play
          />
          <button class="wordSubmit">ðŸ“¤</button>
          <br />
          <span id="typingIndicators"></span>
          <script>
            const explicitSlurRegexes = [
              /\b[cÄ†Ä‡ÄˆÄ‰ÄŒÄÄŠÄ‹Ã‡Ã§á¸ˆá¸‰È»È¼êž’êž“êŸ„êž”Æ‡ÆˆÉ•][hÄ¤Ä¥ÈžÈŸá¸¦á¸§á¸¢á¸£á¸¨á¸©á¸¤á¸¥á¸ªá¸«HÌ±áº–Ä¦Ä§â±§â±¨êžªÉ¦êž•Î—ÐÐ½][iÃÃ­iÌ‡ÌÃŒÃ¬iÌ‡Ì€Ä¬Ä­ÃŽÃ®ÇÇÃÃ¯á¸®á¸¯Ä¨Ä©iÌ‡ÌƒÄ®Ä¯Ä®ÌÄ¯Ì‡ÌÄ®ÌƒÄ¯Ì‡ÌƒÄªÄ«ÄªÌ€Ä«Ì€á»ˆá»‰ÈˆÈ‰IÌ‹iÌ‹ÈŠÈ‹á»Šá»‹êž¼êž½á¸¬á¸­Æ—É¨á¶–Ä°iIÄ±ï¼©ï½‰1lÄºÄ¾Ä¼á¸·á¸¹lÌƒá¸½á¸»Å‚Å€Æšê‰â±¡É«É¬êžŽê¬·ê¬¸ê¬¹á¶…É­È´ï¼¬ï½Œ][nÅƒÅ„Ç¸Ç¹Å‡ÅˆÃ‘Ã±á¹„á¹…Å…Å†á¹†á¹‡á¹Šá¹‹á¹ˆá¹‰NÌˆnÌˆÆÉ²ÅŠÅ‹êžêž‘êž¤êž¥áµ°á¶‡É³Èµê¬»ê¬¼Ð˜Ð¸ÐŸÐ¿ï¼®ï½Ž][ká¸°á¸±Ç¨Ç©Ä¶Ä·á¸²á¸³á¸´á¸µÆ˜Æ™â±©â±ªá¶„ê€êê‚êƒê„ê…êž¢êž£][sÅšÅ›á¹¤á¹¥ÅœÅÅ Å¡á¹¦á¹§á¹ á¹¡ÅžÅŸá¹¢á¹£á¹¨á¹©È˜È™SÌ©sÌ©êž¨êž©â±¾È¿êŸ…Ê‚á¶Šáµ´]?\b/,
              /\b[cÄ†Ä‡ÄˆÄ‰ÄŒÄÄŠÄ‹Ã‡Ã§á¸ˆá¸‰È»È¼êž’êž“êŸ„êž”Æ‡ÆˆÉ•][Ã“Ã³Ã’Ã²ÅŽÅÃ”Ã´á»á»‘á»’á»“á»–á»—á»”á»•Ç‘Ç’Ã–Ã¶ÈªÈ«ÅÅ‘Ã•Ãµá¹Œá¹á¹Žá¹È¬È­È®È¯OÍ˜oÍ˜È°È±Ã˜Ã¸Ç¾Ç¿ÇªÇ«Ç¬Ç­ÅŒÅá¹’á¹“á¹á¹‘á»Žá»ÈŒÈÈŽÈÆ Æ¡á»šá»›á»œá»á» á»¡á»žá»Ÿá»¢á»£á»Œá»á»˜á»™OÌ©oÌ©Ã’Ì©Ã²Ì©Ã“Ì©Ã³Ì©ÆŸÉµêŠê‹êŒêâ±ºï¼¯ï½0]{2}[nÅƒÅ„Ç¸Ç¹Å‡ÅˆÃ‘Ã±á¹„á¹…Å…Å†á¹†á¹‡á¹Šá¹‹á¹ˆá¹‰NÌˆnÌˆÆÉ²ÅŠÅ‹êžêž‘êž¤êž¥áµ°á¶‡É³Èµê¬»ê¬¼Ð˜Ð¸ÐŸÐ¿ï¼®ï½Ž][sÅšÅ›á¹¤á¹¥ÅœÅÅ Å¡á¹¦á¹§á¹ á¹¡ÅžÅŸá¹¢á¹£á¹¨á¹©È˜È™SÌ©sÌ©êž¨êž©â±¾È¿êŸ…Ê‚á¶Šáµ´]?\b/,
              /\b[fá¸žá¸ŸÆ‘Æ’êž˜êž™áµ®á¶‚][aÃÃ¡Ã€Ã Ä‚Äƒáº®áº¯áº°áº±áº´áºµáº²áº³Ã‚Ã¢áº¤áº¥áº¦áº§áºªáº«áº¨áº©ÇÇŽÃ…Ã¥ÇºÇ»Ã„Ã¤ÇžÇŸÃƒÃ£È¦È§Ç Ç¡Ä„Ä…Ä„ÌÄ…ÌÄ„ÌƒÄ…ÌƒÄ€ÄÄ€Ì€ÄÌ€áº¢áº£È€ÈAÌ‹aÌ‹È‚Èƒáº áº¡áº¶áº·áº¬áº­á¸€á¸Èºâ±¥êžºêž»á¶áºšï¼¡ï½@4][gÇ´ÇµÄžÄŸÄœÄÇ¦Ç§Ä Ä¡GÌƒgÌƒÄ¢Ä£á¸ á¸¡Ç¤Ç¥êž êž¡Æ“É á¶ƒê¬¶ï¼§ï½‡qê–ê—ê˜ê™É‹Ê ]{1,2}([Ã“Ã³Ã’Ã²ÅŽÅÃ”Ã´á»á»‘á»’á»“á»–á»—á»”á»•Ç‘Ç’Ã–Ã¶ÈªÈ«ÅÅ‘Ã•Ãµá¹Œá¹á¹Žá¹È¬È­È®È¯OÍ˜oÍ˜È°È±Ã˜Ã¸Ç¾Ç¿ÇªÇ«Ç¬Ç­ÅŒÅá¹’á¹“á¹á¹‘á»Žá»ÈŒÈÈŽÈÆ Æ¡á»šá»›á»œá»á» á»¡á»žá»Ÿá»¢á»£á»Œá»á»˜á»™OÌ©oÌ©Ã’Ì©Ã²Ì©Ã“Ì©Ã³Ì©ÆŸÉµêŠê‹êŒêâ±ºï¼¯ï½0e3Ð„Ñ”Ð•ÐµÃ‰Ã©ÃˆÃ¨Ä”Ä•ÃŠÃªáº¾áº¿á»€á»á»„á»…á»‚á»ƒÃŠÌ„ÃªÌ„ÃŠÌŒÃªÌŒÄšÄ›Ã‹Ã«áº¼áº½Ä–Ä—Ä–ÌÄ—ÌÄ–ÌƒÄ—ÌƒÈ¨È©á¸œá¸Ä˜Ä™Ä˜ÌÄ™ÌÄ˜ÌƒÄ™ÌƒÄ’Ä“á¸–á¸—á¸”á¸•áººáº»È„È…EÌ‹eÌ‹È†È‡áº¸áº¹á»†á»‡á¸˜á¸™á¸šá¸›É†É‡EÌ©eÌ©ÃˆÌ©Ã¨Ì©Ã‰Ì©Ã©Ì©á¶’â±¸ê¬´ê¬³ï¼¥ï½…iÃÃ­iÌ‡ÌÃŒÃ¬iÌ‡Ì€Ä¬Ä­ÃŽÃ®ÇÇÃÃ¯á¸®á¸¯Ä¨Ä©iÌ‡ÌƒÄ®Ä¯Ä®ÌÄ¯Ì‡ÌÄ®ÌƒÄ¯Ì‡ÌƒÄªÄ«ÄªÌ€Ä«Ì€á»ˆá»‰ÈˆÈ‰IÌ‹iÌ‹ÈŠÈ‹á»Šá»‹êž¼êž½á¸¬á¸­Æ—É¨á¶–Ä°iIÄ±ï¼©ï½‰1lÄºÄ¾Ä¼á¸·á¸¹lÌƒá¸½á¸»Å‚Å€Æšê‰â±¡É«É¬êžŽê¬·ê¬¸ê¬¹á¶…É­È´ï¼¬ï½Œ][tÅ¤Å¥á¹ªá¹«Å¢Å£á¹¬á¹­ÈšÈ›á¹°á¹±á¹®á¹¯Å¦Å§È¾â±¦Æ¬Æ­Æ®ÊˆTÌˆáº—áµµÆ«È¶]{1,2}([rÅ”Å•Å˜Å™á¹˜á¹™Å–Å—ÈÈ‘È’È“á¹šá¹›á¹œá¹á¹žá¹ŸRÌƒrÌƒÉŒÉêž¦êž§â±¤É½áµ²á¶‰ê­‰][yÃÃ½á»²á»³Å¶Å·YÌŠáº™Å¸Ã¿á»¸á»¹áºŽáºÈ²È³á»¶á»·á»´á»µÉŽÉÆ³Æ´á»¾á»¿]|[rÅ”Å•Å˜Å™á¹˜á¹™Å–Å—ÈÈ‘È’È“á¹šá¹›á¹œá¹á¹žá¹ŸRÌƒrÌƒÉŒÉêž¦êž§â±¤É½áµ²á¶‰ê­‰][iÃÃ­iÌ‡ÌÃŒÃ¬iÌ‡Ì€Ä¬Ä­ÃŽÃ®ÇÇÃÃ¯á¸®á¸¯Ä¨Ä©iÌ‡ÌƒÄ®Ä¯Ä®ÌÄ¯Ì‡ÌÄ®ÌƒÄ¯Ì‡ÌƒÄªÄ«ÄªÌ€Ä«Ì€á»ˆá»‰ÈˆÈ‰IÌ‹iÌ‹ÈŠÈ‹á»Šá»‹êž¼êž½á¸¬á¸­Æ—É¨á¶–Ä°iIÄ±ï¼©ï½‰1lÄºÄ¾Ä¼á¸·á¸¹lÌƒá¸½á¸»Å‚Å€Æšê‰â±¡É«É¬êžŽê¬·ê¬¸ê¬¹á¶…É­È´ï¼¬ï½Œ][e3Ð„Ñ”Ð•ÐµÃ‰Ã©ÃˆÃ¨Ä”Ä•ÃŠÃªáº¾áº¿á»€á»á»„á»…á»‚á»ƒÃŠÌ„ÃªÌ„ÃŠÌŒÃªÌŒÄšÄ›Ã‹Ã«áº¼áº½Ä–Ä—Ä–ÌÄ—ÌÄ–ÌƒÄ—ÌƒÈ¨È©á¸œá¸Ä˜Ä™Ä˜ÌÄ™ÌÄ˜ÌƒÄ™ÌƒÄ’Ä“á¸–á¸—á¸”á¸•áººáº»È„È…EÌ‹eÌ‹È†È‡áº¸áº¹á»†á»‡á¸˜á¸™á¸šá¸›É†É‡EÌ©eÌ©ÃˆÌ©Ã¨Ì©Ã‰Ì©Ã©Ì©á¶’â±¸ê¬´ê¬³ï¼¥ï½…])?)?[sÅšÅ›á¹¤á¹¥ÅœÅÅ Å¡á¹¦á¹§á¹ á¹¡ÅžÅŸá¹¢á¹£á¹¨á¹©È˜È™SÌ©sÌ©êž¨êž©â±¾È¿êŸ…Ê‚á¶Šáµ´]?\b/,
              /\b[ká¸°á¸±Ç¨Ç©Ä¶Ä·á¸²á¸³á¸´á¸µÆ˜Æ™â±©â±ªá¶„ê€êê‚êƒê„ê…êž¢êž£][iÃÃ­iÌ‡ÌÃŒÃ¬iÌ‡Ì€Ä¬Ä­ÃŽÃ®ÇÇÃÃ¯á¸®á¸¯Ä¨Ä©iÌ‡ÌƒÄ®Ä¯Ä®ÌÄ¯Ì‡ÌÄ®ÌƒÄ¯Ì‡ÌƒÄªÄ«ÄªÌ€Ä«Ì€á»ˆá»‰ÈˆÈ‰IÌ‹iÌ‹ÈŠÈ‹á»Šá»‹êž¼êž½á¸¬á¸­Æ—É¨á¶–Ä°iIÄ±ï¼©ï½‰1lÄºÄ¾Ä¼á¸·á¸¹lÌƒá¸½á¸»Å‚Å€Æšê‰â±¡É«É¬êžŽê¬·ê¬¸ê¬¹á¶…É­È´ï¼¬ï½ŒyÃÃ½á»²á»³Å¶Å·YÌŠáº™Å¸Ã¿á»¸á»¹áºŽáºÈ²È³á»¶á»·á»´á»µÉŽÉÆ³Æ´á»¾á»¿][ká¸°á¸±Ç¨Ç©Ä¶Ä·á¸²á¸³á¸´á¸µÆ˜Æ™â±©â±ªá¶„ê€êê‚êƒê„ê…êž¢êž£][e3Ð„Ñ”Ð•ÐµÃ‰Ã©ÃˆÃ¨Ä”Ä•ÃŠÃªáº¾áº¿á»€á»á»„á»…á»‚á»ƒÃŠÌ„ÃªÌ„ÃŠÌŒÃªÌŒÄšÄ›Ã‹Ã«áº¼áº½Ä–Ä—Ä–ÌÄ—ÌÄ–ÌƒÄ—ÌƒÈ¨È©á¸œá¸Ä˜Ä™Ä˜ÌÄ™ÌÄ˜ÌƒÄ™ÌƒÄ’Ä“á¸–á¸—á¸”á¸•áººáº»È„È…EÌ‹eÌ‹È†È‡áº¸áº¹á»†á»‡á¸˜á¸™á¸šá¸›É†É‡EÌ©eÌ©ÃˆÌ©Ã¨Ì©Ã‰Ì©Ã©Ì©á¶’â±¸ê¬´ê¬³ï¼¥ï½…]([rÅ”Å•Å˜Å™á¹˜á¹™Å–Å—ÈÈ‘È’È“á¹šá¹›á¹œá¹á¹žá¹ŸRÌƒrÌƒÉŒÉêž¦êž§â±¤É½áµ²á¶‰ê­‰][yÃÃ½á»²á»³Å¶Å·YÌŠáº™Å¸Ã¿á»¸á»¹áºŽáºÈ²È³á»¶á»·á»´á»µÉŽÉÆ³Æ´á»¾á»¿]|[rÅ”Å•Å˜Å™á¹˜á¹™Å–Å—ÈÈ‘È’È“á¹šá¹›á¹œá¹á¹žá¹ŸRÌƒrÌƒÉŒÉêž¦êž§â±¤É½áµ²á¶‰ê­‰][iÃÃ­iÌ‡ÌÃŒÃ¬iÌ‡Ì€Ä¬Ä­ÃŽÃ®ÇÇÃÃ¯á¸®á¸¯Ä¨Ä©iÌ‡ÌƒÄ®Ä¯Ä®ÌÄ¯Ì‡ÌÄ®ÌƒÄ¯Ì‡ÌƒÄªÄ«ÄªÌ€Ä«Ì€á»ˆá»‰ÈˆÈ‰IÌ‹iÌ‹ÈŠÈ‹á»Šá»‹êž¼êž½á¸¬á¸­Æ—É¨á¶–Ä°iIÄ±ï¼©ï½‰1lÄºÄ¾Ä¼á¸·á¸¹lÌƒá¸½á¸»Å‚Å€Æšê‰â±¡É«É¬êžŽê¬·ê¬¸ê¬¹á¶…É­È´ï¼¬ï½Œ][e3Ð„Ñ”Ð•ÐµÃ‰Ã©ÃˆÃ¨Ä”Ä•ÃŠÃªáº¾áº¿á»€á»á»„á»…á»‚á»ƒÃŠÌ„ÃªÌ„ÃŠÌŒÃªÌŒÄšÄ›Ã‹Ã«áº¼áº½Ä–Ä—Ä–ÌÄ—ÌÄ–ÌƒÄ—ÌƒÈ¨È©á¸œá¸Ä˜Ä™Ä˜ÌÄ™ÌÄ˜ÌƒÄ™ÌƒÄ’Ä“á¸–á¸—á¸”á¸•áººáº»È„È…EÌ‹eÌ‹È†È‡áº¸áº¹á»†á»‡á¸˜á¸™á¸šá¸›É†É‡EÌ©eÌ©ÃˆÌ©Ã¨Ì©Ã‰Ì©Ã©Ì©á¶’â±¸ê¬´ê¬³ï¼¥ï½…])?[sÅšÅ›á¹¤á¹¥ÅœÅÅ Å¡á¹¦á¹§á¹ á¹¡ÅžÅŸá¹¢á¹£á¹¨á¹©È˜È™SÌ©sÌ©êž¨êž©â±¾È¿êŸ…Ê‚á¶Šáµ´]*\b/,
              /\b[nÅƒÅ„Ç¸Ç¹Å‡ÅˆÃ‘Ã±á¹„á¹…Å…Å†á¹†á¹‡á¹Šá¹‹á¹ˆá¹‰NÌˆnÌˆÆÉ²ÅŠÅ‹êžêž‘êž¤êž¥áµ°á¶‡É³Èµê¬»ê¬¼Ð˜Ð¸ÐŸÐ¿ï¼®ï½Ž][iÃÃ­iÌ‡ÌÃŒÃ¬iÌ‡Ì€Ä¬Ä­ÃŽÃ®ÇÇÃÃ¯á¸®á¸¯Ä¨Ä©iÌ‡ÌƒÄ®Ä¯Ä®ÌÄ¯Ì‡ÌÄ®ÌƒÄ¯Ì‡ÌƒÄªÄ«ÄªÌ€Ä«Ì€á»ˆá»‰ÈˆÈ‰IÌ‹iÌ‹ÈŠÈ‹á»Šá»‹êž¼êž½á¸¬á¸­Æ—É¨á¶–Ä°iIÄ±ï¼©ï½‰1lÄºÄ¾Ä¼á¸·á¸¹lÌƒá¸½á¸»Å‚Å€Æšê‰â±¡É«É¬êžŽê¬·ê¬¸ê¬¹á¶…É­È´ï¼¬ï½ŒoÃ“Ã³Ã’Ã²ÅŽÅÃ”Ã´á»á»‘á»’á»“á»–á»—á»”á»•Ç‘Ç’Ã–Ã¶ÈªÈ«ÅÅ‘Ã•Ãµá¹Œá¹á¹Žá¹È¬È­È®È¯OÍ˜oÍ˜È°È±Ã˜Ã¸Ç¾Ç¿ÇªÇ«Ç¬Ç­ÅŒÅá¹’á¹“á¹á¹‘á»Žá»ÈŒÈÈŽÈÆ Æ¡á»šá»›á»œá»á» á»¡á»žá»Ÿá»¢á»£á»Œá»á»˜á»™OÌ©oÌ©Ã’Ì©Ã²Ì©Ã“Ì©Ã³Ì©ÆŸÉµêŠê‹êŒêâ±ºï¼¯ï½Ð†Ñ–a4ÃÃ¡Ã€Ã Ä‚Äƒáº®áº¯áº°áº±áº´áºµáº²áº³Ã‚Ã¢áº¤áº¥áº¦áº§áºªáº«áº¨áº©ÇÇŽÃ…Ã¥ÇºÇ»Ã„Ã¤ÇžÇŸÃƒÃ£È¦È§Ç Ç¡Ä„Ä…Ä„ÌÄ…ÌÄ„ÌƒÄ…ÌƒÄ€ÄÄ€Ì€ÄÌ€áº¢áº£È€ÈAÌ‹aÌ‹È‚Èƒáº áº¡áº¶áº·áº¬áº­á¸€á¸Èºâ±¥êžºêž»á¶áºšï¼¡ï½][gÇ´ÇµÄžÄŸÄœÄÇ¦Ç§Ä Ä¡GÌƒgÌƒÄ¢Ä£á¸ á¸¡Ç¤Ç¥êž êž¡Æ“É á¶ƒê¬¶ï¼§ï½‡qê–ê—ê˜ê™É‹Ê ]{2}(l[e3Ð„Ñ”Ð•ÐµÃ‰Ã©ÃˆÃ¨Ä”Ä•ÃŠÃªáº¾áº¿á»€á»á»„á»…á»‚á»ƒÃŠÌ„ÃªÌ„ÃŠÌŒÃªÌŒÄšÄ›Ã‹Ã«áº¼áº½Ä–Ä—Ä–ÌÄ—ÌÄ–ÌƒÄ—ÌƒÈ¨È©á¸œá¸Ä˜Ä™Ä˜ÌÄ™ÌÄ˜ÌƒÄ™ÌƒÄ’Ä“á¸–á¸—á¸”á¸•áººáº»È„È…EÌ‹eÌ‹È†È‡áº¸áº¹á»†á»‡á¸˜á¸™á¸šá¸›É†É‡EÌ©eÌ©ÃˆÌ©Ã¨Ì©Ã‰Ì©Ã©Ì©á¶’â±¸ê¬´ê¬³ï¼¥ï½…]t|[e3Ð„Ñ”Ð•ÐµÃ‰Ã©ÃˆÃ¨Ä”Ä•ÃŠÃªáº¾áº¿á»€á»á»„á»…á»‚á»ƒÃŠÌ„ÃªÌ„ÃŠÌŒÃªÌŒÄšÄ›Ã‹Ã«áº¼áº½Ä–Ä—Ä–ÌÄ—ÌÄ–ÌƒÄ—ÌƒÈ¨È©á¸œá¸Ä˜Ä™Ä˜ÌÄ™ÌÄ˜ÌƒÄ™ÌƒÄ’Ä“á¸–á¸—á¸”á¸•áººáº»È„È…EÌ‹eÌ‹È†È‡áº¸áº¹á»†á»‡á¸˜á¸™á¸šá¸›É†É‡EÌ©eÌ©ÃˆÌ©Ã¨Ì©Ã‰Ì©Ã©Ì©á¶’â±¸ê¬´ê¬³ï¼¥ï½…aÃÃ¡Ã€Ã Ä‚Äƒáº®áº¯áº°áº±áº´áºµáº²áº³Ã‚Ã¢áº¤áº¥áº¦áº§áºªáº«áº¨áº©ÇÇŽÃ…Ã¥ÇºÇ»Ã„Ã¤ÇžÇŸÃƒÃ£È¦È§Ç Ç¡Ä„Ä…Ä„ÌÄ…ÌÄ„ÌƒÄ…ÌƒÄ€ÄÄ€Ì€ÄÌ€áº¢áº£È€ÈAÌ‹aÌ‹È‚Èƒáº áº¡áº¶áº·áº¬áº­á¸€á¸Èºâ±¥êžºêž»á¶áºšï¼¡ï½][rÅ”Å•Å˜Å™á¹˜á¹™Å–Å—ÈÈ‘È’È“á¹šá¹›á¹œá¹á¹žá¹ŸRÌƒrÌƒÉŒÉêž¦êž§â±¤É½áµ²á¶‰ê­‰]?|n[Ã“Ã³Ã’Ã²ÅŽÅÃ”Ã´á»á»‘á»’á»“á»–á»—á»”á»•Ç‘Ç’Ã–Ã¶ÈªÈ«ÅÅ‘Ã•Ãµá¹Œá¹á¹Žá¹È¬È­È®È¯OÍ˜oÍ˜È°È±Ã˜Ã¸Ç¾Ç¿ÇªÇ«Ç¬Ç­ÅŒÅá¹’á¹“á¹á¹‘á»Žá»ÈŒÈÈŽÈÆ Æ¡á»šá»›á»œá»á» á»¡á»žá»Ÿá»¢á»£á»Œá»á»˜á»™OÌ©oÌ©Ã’Ì©Ã²Ì©Ã“Ì©Ã³Ì©ÆŸÉµêŠê‹êŒêâ±ºï¼¯ï½0][gÇ´ÇµÄžÄŸÄœÄÇ¦Ç§Ä Ä¡GÌƒgÌƒÄ¢Ä£á¸ á¸¡Ç¤Ç¥êž êž¡Æ“É á¶ƒê¬¶ï¼§ï½‡qê–ê—ê˜ê™É‹Ê ]|[a4ÃÃ¡Ã€Ã Ä‚Äƒáº®áº¯áº°áº±áº´áºµáº²áº³Ã‚Ã¢áº¤áº¥áº¦áº§áºªáº«áº¨áº©ÇÇŽÃ…Ã¥ÇºÇ»Ã„Ã¤ÇžÇŸÃƒÃ£È¦È§Ç Ç¡Ä„Ä…Ä„ÌÄ…ÌÄ„ÌƒÄ…ÌƒÄ€ÄÄ€Ì€ÄÌ€áº¢áº£È€ÈAÌ‹aÌ‹È‚Èƒáº áº¡áº¶áº·áº¬áº­á¸€á¸Èºâ±¥êžºêž»á¶áºšï¼¡ï½]?)?[sÅšÅ›á¹¤á¹¥ÅœÅÅ Å¡á¹¦á¹§á¹ á¹¡ÅžÅŸá¹¢á¹£á¹¨á¹©È˜È™SÌ©sÌ©êž¨êž©â±¾È¿êŸ…Ê‚á¶Šáµ´]?\b/,
              /[nÅƒÅ„Ç¸Ç¹Å‡ÅˆÃ‘Ã±á¹„á¹…Å…Å†á¹†á¹‡á¹Šá¹‹á¹ˆá¹‰NÌˆnÌˆÆÉ²ÅŠÅ‹êžêž‘êž¤êž¥áµ°á¶‡É³Èµê¬»ê¬¼Ð˜Ð¸ÐŸÐ¿ï¼®ï½Ž][iÃÃ­iÌ‡ÌÃŒÃ¬iÌ‡Ì€Ä¬Ä­ÃŽÃ®ÇÇÃÃ¯á¸®á¸¯Ä¨Ä©iÌ‡ÌƒÄ®Ä¯Ä®ÌÄ¯Ì‡ÌÄ®ÌƒÄ¯Ì‡ÌƒÄªÄ«ÄªÌ€Ä«Ì€á»ˆá»‰ÈˆÈ‰IÌ‹iÌ‹ÈŠÈ‹á»Šá»‹êž¼êž½á¸¬á¸­Æ—É¨á¶–Ä°iIÄ±ï¼©ï½‰1lÄºÄ¾Ä¼á¸·á¸¹lÌƒá¸½á¸»Å‚Å€Æšê‰â±¡É«É¬êžŽê¬·ê¬¸ê¬¹á¶…É­È´ï¼¬ï½ŒoÃ“Ã³Ã’Ã²ÅŽÅÃ”Ã´á»á»‘á»’á»“á»–á»—á»”á»•Ç‘Ç’Ã–Ã¶ÈªÈ«ÅÅ‘Ã•Ãµá¹Œá¹á¹Žá¹È¬È­È®È¯OÍ˜oÍ˜È°È±Ã˜Ã¸Ç¾Ç¿ÇªÇ«Ç¬Ç­ÅŒÅá¹’á¹“á¹á¹‘á»Žá»ÈŒÈÈŽÈÆ Æ¡á»šá»›á»œá»á» á»¡á»žá»Ÿá»¢á»£á»Œá»á»˜á»™OÌ©oÌ©Ã’Ì©Ã²Ì©Ã“Ì©Ã³Ì©ÆŸÉµêŠê‹êŒêâ±ºï¼¯ï½Ð†Ñ–a4ÃÃ¡Ã€Ã Ä‚Äƒáº®áº¯áº°áº±áº´áºµáº²áº³Ã‚Ã¢áº¤áº¥áº¦áº§áºªáº«áº¨áº©ÇÇŽÃ…Ã¥ÇºÇ»Ã„Ã¤ÇžÇŸÃƒÃ£È¦È§Ç Ç¡Ä„Ä…Ä„ÌÄ…ÌÄ„ÌƒÄ…ÌƒÄ€ÄÄ€Ì€ÄÌ€áº¢áº£È€ÈAÌ‹aÌ‹È‚Èƒáº áº¡áº¶áº·áº¬áº­á¸€á¸Èºâ±¥êžºêž»á¶áºšï¼¡ï½][gÇ´ÇµÄžÄŸÄœÄÇ¦Ç§Ä Ä¡GÌƒgÌƒÄ¢Ä£á¸ á¸¡Ç¤Ç¥êž êž¡Æ“É á¶ƒê¬¶ï¼§ï½‡qê–ê—ê˜ê™É‹Ê ]{2}(l[e3Ð„Ñ”Ð•ÐµÃ‰Ã©ÃˆÃ¨Ä”Ä•ÃŠÃªáº¾áº¿á»€á»á»„á»…á»‚á»ƒÃŠÌ„ÃªÌ„ÃŠÌŒÃªÌŒÄšÄ›Ã‹Ã«áº¼áº½Ä–Ä—Ä–ÌÄ—ÌÄ–ÌƒÄ—ÌƒÈ¨È©á¸œá¸Ä˜Ä™Ä˜ÌÄ™ÌÄ˜ÌƒÄ™ÌƒÄ’Ä“á¸–á¸—á¸”á¸•áººáº»È„È…EÌ‹eÌ‹È†È‡áº¸áº¹á»†á»‡á¸˜á¸™á¸šá¸›É†É‡EÌ©eÌ©ÃˆÌ©Ã¨Ì©Ã‰Ì©Ã©Ì©á¶’â±¸ê¬´ê¬³ï¼¥ï½…]t|[e3Ð„Ñ”Ð•ÐµÃ‰Ã©ÃˆÃ¨Ä”Ä•ÃŠÃªáº¾áº¿á»€á»á»„á»…á»‚á»ƒÃŠÌ„ÃªÌ„ÃŠÌŒÃªÌŒÄšÄ›Ã‹Ã«áº¼áº½Ä–Ä—Ä–ÌÄ—ÌÄ–ÌƒÄ—ÌƒÈ¨È©á¸œá¸Ä˜Ä™Ä˜ÌÄ™ÌÄ˜ÌƒÄ™ÌƒÄ’Ä“á¸–á¸—á¸”á¸•áººáº»È„È…EÌ‹eÌ‹È†È‡áº¸áº¹á»†á»‡á¸˜á¸™á¸šá¸›É†É‡EÌ©eÌ©ÃˆÌ©Ã¨Ì©Ã‰Ì©Ã©Ì©á¶’â±¸ê¬´ê¬³ï¼¥ï½…][rÅ”Å•Å˜Å™á¹˜á¹™Å–Å—ÈÈ‘È’È“á¹šá¹›á¹œá¹á¹žá¹ŸRÌƒrÌƒÉŒÉêž¦êž§â±¤É½áµ²á¶‰ê­‰])[sÅšÅ›á¹¤á¹¥ÅœÅÅ Å¡á¹¦á¹§á¹ á¹¡ÅžÅŸá¹¢á¹£á¹¨á¹©È˜È™SÌ©sÌ©êž¨êž©â±¾È¿êŸ…Ê‚á¶Šáµ´]?/,
              /\b[tÅ¤Å¥á¹ªá¹«Å¢Å£á¹¬á¹­ÈšÈ›á¹°á¹±á¹®á¹¯Å¦Å§È¾â±¦Æ¬Æ­Æ®ÊˆTÌˆáº—áµµÆ«È¶][rÅ”Å•Å˜Å™á¹˜á¹™Å–Å—ÈÈ‘È’È“á¹šá¹›á¹œá¹á¹žá¹ŸRÌƒrÌƒÉŒÉêž¦êž§â±¤É½áµ²á¶‰ê­‰][aÃÃ¡Ã€Ã Ä‚Äƒáº®áº¯áº°áº±áº´áºµáº²áº³Ã‚Ã¢áº¤áº¥áº¦áº§áºªáº«áº¨áº©ÇÇŽÃ…Ã¥ÇºÇ»Ã„Ã¤ÇžÇŸÃƒÃ£È¦È§Ç Ç¡Ä„Ä…Ä„ÌÄ…ÌÄ„ÌƒÄ…ÌƒÄ€ÄÄ€Ì€ÄÌ€áº¢áº£È€ÈAÌ‹aÌ‹È‚Èƒáº áº¡áº¶áº·áº¬áº­á¸€á¸Èºâ±¥êžºêž»á¶áºšï¼¡ï½4]+[nÅƒÅ„Ç¸Ç¹Å‡ÅˆÃ‘Ã±á¹„á¹…Å…Å†á¹†á¹‡á¹Šá¹‹á¹ˆá¹‰NÌˆnÌˆÆÉ²ÅŠÅ‹êžêž‘êž¤êž¥áµ°á¶‡É³Èµê¬»ê¬¼Ð˜Ð¸ÐŸÐ¿ï¼®ï½Ž]{1,2}([iÃÃ­iÌ‡ÌÃŒÃ¬iÌ‡Ì€Ä¬Ä­ÃŽÃ®ÇÇÃÃ¯á¸®á¸¯Ä¨Ä©iÌ‡ÌƒÄ®Ä¯Ä®ÌÄ¯Ì‡ÌÄ®ÌƒÄ¯Ì‡ÌƒÄªÄ«ÄªÌ€Ä«Ì€á»ˆá»‰ÈˆÈ‰IÌ‹iÌ‹ÈŠÈ‹á»Šá»‹êž¼êž½á¸¬á¸­Æ—É¨á¶–Ä°iIÄ±ï¼©ï½‰1lÄºÄ¾Ä¼á¸·á¸¹lÌƒá¸½á¸»Å‚Å€Æšê‰â±¡É«É¬êžŽê¬·ê¬¸ê¬¹á¶…É­È´ï¼¬ï½Œ][e3Ð„Ñ”Ð•ÐµÃ‰Ã©ÃˆÃ¨Ä”Ä•ÃŠÃªáº¾áº¿á»€á»á»„á»…á»‚á»ƒÃŠÌ„ÃªÌ„ÃŠÌŒÃªÌŒÄšÄ›Ã‹Ã«áº¼áº½Ä–Ä—Ä–ÌÄ—ÌÄ–ÌƒÄ—ÌƒÈ¨È©á¸œá¸Ä˜Ä™Ä˜ÌÄ™ÌÄ˜ÌƒÄ™ÌƒÄ’Ä“á¸–á¸—á¸”á¸•áººáº»È„È…EÌ‹eÌ‹È†È‡áº¸áº¹á»†á»‡á¸˜á¸™á¸šá¸›É†É‡EÌ©eÌ©ÃˆÌ©Ã¨Ì©Ã‰Ì©Ã©Ì©á¶’â±¸ê¬´ê¬³ï¼¥ï½…]|[yÃÃ½á»²á»³Å¶Å·YÌŠáº™Å¸Ã¿á»¸á»¹áºŽáºÈ²È³á»¶á»·á»´á»µÉŽÉÆ³Æ´á»¾á»¿]|[e3Ð„Ñ”Ð•ÐµÃ‰Ã©ÃˆÃ¨Ä”Ä•ÃŠÃªáº¾áº¿á»€á»á»„á»…á»‚á»ƒÃŠÌ„ÃªÌ„ÃŠÌŒÃªÌŒÄšÄ›Ã‹Ã«áº¼áº½Ä–Ä—Ä–ÌÄ—ÌÄ–ÌƒÄ—ÌƒÈ¨È©á¸œá¸Ä˜Ä™Ä˜ÌÄ™ÌÄ˜ÌƒÄ™ÌƒÄ’Ä“á¸–á¸—á¸”á¸•áººáº»È„È…EÌ‹eÌ‹È†È‡áº¸áº¹á»†á»‡á¸˜á¸™á¸šá¸›É†É‡EÌ©eÌ©ÃˆÌ©Ã¨Ì©Ã‰Ì©Ã©Ì©á¶’â±¸ê¬´ê¬³ï¼¥ï½…][rÅ”Å•Å˜Å™á¹˜á¹™Å–Å—ÈÈ‘È’È“á¹šá¹›á¹œá¹á¹žá¹ŸRÌƒrÌƒÉŒÉêž¦êž§â±¤É½áµ²á¶‰ê­‰])[sÅšÅ›á¹¤á¹¥ÅœÅÅ Å¡á¹¦á¹§á¹ á¹¡ÅžÅŸá¹¢á¹£á¹¨á¹©È˜È™SÌ©sÌ©êž¨êž©â±¾È¿êŸ…Ê‚á¶Šáµ´]?\b/,
            ];

            const hasExplicitSlur = (handle) => {
              return explicitSlurRegexes.some((reg) => reg.test(handle));
            };
            const input = document.getElementById("wordInput");
            const submitBtn = document.querySelector(".wordSubmit");
            const storyContent = document.getElementById("storyContent");
            const typingIndicators =
              document.getElementById("typingIndicators");
            function updateUserColor(color) {
              localStorage.setItem("color", JSON.stringify(color));
            }
            function getUserColor() {
              return localStorage.getItem("color")
                ? JSON.parse(localStorage.getItem("color"))
                : undefined;
            }
            function randomColor() {
              const hex = Math.floor(Math.random() * 16777215).toString(16);
              return "#" + hex;
            }
            function convertHexToRGB(hex) {
              const r = parseInt(hex.slice(1, 3), 16);
              const g = parseInt(hex.slice(3, 5), 16);
              const b = parseInt(hex.slice(5, 7), 16);
              return { r, g, b };
            }
            function getColorVar(color) {
              if (!color) {
                return "transparent";
              }

              const { r, g, b } = convertHexToRGB(color);
              return `${r}, ${g}, ${b}`;
            }

            if (getUserColor() === undefined) {
              updateUserColor(randomColor());
            }
            colorPicker.value = getUserColor();
            function isValidWord(word) {
              return word.split(/\s+/).length === 1;
            }

            input.defaultData = [];
            input.myDefaultAwareness = null;
            input.onMount = ({ setData, getData, setMyAwareness }) => {
              const onSubmit = () => {
                submitBtn.disabled = true;
                if (!isValidWord(input.value)) {
                  alert("please enter a single word!");
                  submitBtn.disabled = false;
                  return;
                }
                if (hasExplicitSlur(input.value)) {
                  alert("please don't troll and be nice");
                  submitBtn.disabled = false;
                  return;
                }
                // valid length again
                if (input.value.length > 20) {
                  alert("too long!");
                  submitBtn.disabled = false;
                  return;
                }
                const existingStory = getData();
                const newEntry = {
                  word: input.value,
                  color: getUserColor(),
                  ts: Date.now(),
                };
                setData([...existingStory, newEntry]);
                input.value = "";
                setMyAwareness(null);
                submitBtn.disabled = false;
              };

              submitBtn.addEventListener("click", onSubmit);
              input.addEventListener("keydown", (event) => {
                if (event.key === "Enter") {
                  onSubmit();
                }
              });
              input.addEventListener("input", (event) => {
                if (event.target.value === "") {
                  setMyAwareness(null);
                } else {
                  setMyAwareness(getUserColor());
                }
              });
            };
            input.updateElementAwareness = ({ awareness, myAwareness }) => {
              // people active on the site but not typing will be set to null
              const activeUsers = awareness.filter((c) => Boolean(c));
              const otherActiveUsers = [...activeUsers];
              const myIndex = otherActiveUsers.findIndex(
                (c) => c === myAwareness
              );

              // remove first instance of myAwareness to get everyone else and handle duplicates
              if (myIndex !== -1) {
                otherActiveUsers.splice(myIndex, 1);
              }
              const typingUsers = [];
              for (const color of otherActiveUsers) {
                typingUsers.push(`<div  class="typingIndicator" style="--word-color:${getColorVar(
                  color
                )}">
                    <span></span>
                    <span></span>
                    <span></span>
                  </div>`);
              }
              typingIndicators.innerHTML = typingUsers.join("\n");

              activeUsersCount.innerText = awareness.length;
            };
            input.updateElement = ({ data }) => {
              if (data.length > 0) {
                const lastDate = new Date(data[data.length - 1].ts);
                lastUpdatedTime.innerText =
                  lastDate.toLocaleTimeString() +
                  " on " +
                  lastDate.toLocaleDateString();
              }

              storyContent.innerHTML = data
                .map(
                  ({ word, color }) =>
                    `<span class="word" style="--word-color:${getColorVar(
                      color
                    )}">${word}</span>`
                )
                .join("\n");
            };
          </script>
        </p>
      </div>
    </div>
    <footer>
      <div>
        an open-source library created and maintained by
        <a href="https://spencer.place/">spencer</a>
      </div>
    </footer>

    <script type="module" src="./story.ts"></script>
    <script type="module">
      import "https://unpkg.com/playhtml@latest";
      playhtml.init({ room: window.location.pathname });
    </script>
    <!-- import cursor chat -->
    <script src="https://cursor-party.spencerc99.partykit.dev/cursors.js"></script>
  </body>
</html>
