<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/png" href="/icon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="interactive, collaborative html elements with a single attribute"
    />
    <meta name="og:image" content="https://playhtml.fun/playhtml.png" />

    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Carter+One&family=Play:wght@400;700&family=Rubik+Pixels&family=Yellowtail&display=swap"
      rel="stylesheet"
    />

    <title>playhtml</title>
    <script
      defer
      data-domain="playhtml.fun"
      data-api="https://sharingan.spencerc99.workers.dev/genjutsu/event"
      src="https://sharingan.spencerc99.workers.dev/genjutsu/script.js"
    ></script>
    <!-- Place this tag in your head or just before your close body tag. -->
    <script async defer src="https://buttons.github.io/buttons.js"></script>
  </head>
  <body>
    <div id="app">
      <div can-move id="sign">in beta</div>
      <div id="plantContainer" can-move>
        <div id="plant" can-grow></div>
        <div class="pot"></div>
      </div>

      <!-- <div id="viewCount"></div> -->
      <div class="content">
        <div class="topSpacer" />
        <h1>
          play<span class="letter" id="h" can-toggle>h</span
          ><span class="letter" id="t" can-toggle>t</span
          ><span class="letter" id="m" can-toggle>m</span
          ><span class="letter" id="l" can-toggle>l</span>
          <!-- Place this tag where you want the button to render. -->
          <!-- Place this tag where you want the button to render. -->
          <a
            class="github-button"
            href="https://github.com/spencerc99/playhtml"
            data-icon="octicon-star"
            data-size="large"
            data-show-count="true"
            aria-label="Star spencerc99/playhtml on GitHub"
            >Star</a
          >
        </h1>
        <div id="lampContainer">
          <img
            class="lamp"
            id="lamp-hanging"
            src="/noguchi-hanging-lamp.png"
            can-toggle
          />
        </div>
        <img src="playhtml-logo.png" can-spin id="stamp" shared />
        <i
          >library-agnostic (<a href="https://github.com/spencerc99/playhtml/"
            >html</a
          >,
          <a
            href="https://github.com/spencerc99/playhtml/tree/main/packages/react"
            >react</a
          >), fast, and expressive</i
        >
        <p>
          <b>playhtml</b> is an
          <a href="https://github.com/spencerc99/playhtml"
            >open-source library</a
          >
          for designing communal web experiences by enhancing web elements with
          real-time, collaborative interactivity.
        </p>
        <p>
          Why does the internet feel lonely when we increasingly spend much of
          our time on it? I think it's because most of the internet is a
          solitary experience, by design: personal algorithmic feeds,
          content-focused websites, no indicator of who else is here with us
          right now.
        </p>
        <p>
          We need new imaginations and speculations for what the web could be
          and who we could be on it.
        </p>

        <p>
          playhtml is designed as infrastructure for designing communal internet
          experiences that make the
          <a href="https://spencerchang.substack.com/p/ti-08-aliving-the-web"
            >web feel alive</a
          >. Beyond individual experiences, and even the collaborative ones we
          are familiar with (shared cursors, canvases, etc.), there's so many
          more shapes for us to interact with each other online. I hope this
          makes it possible for anyone to create their own expressive social
          media "app" but via the open web rather than a closed platform.
        </p>

        <p>
          Most of the elements on this page are live examples! Trying clicking,
          dragging, and playing around with them. If anyone else is on the site,
          you'll see their cursors and how they're playing with the elements
          too.
          <!-- TODO: add a button that actives an AI cursor??? -->
        </p>

        <div id="reactContent"></div>

        <div class="example-roulette">
          <div id="exampleSlot" class="example-slot">
            <h2>games & examples</h2>
            <img
              id="slotHandle"
              src="/slot-machine-handle.png"
              class="slot-handle"
              can-play
              alt="Pull the lever!"
              title="Pull the lever to spin!"
            />
            <div class="browser-window">
              <div class="browser-chrome">
                <div class="browser-dots">
                  <span class="dot red"></span>
                  <span class="dot yellow"></span>
                  <span class="dot green"></span>
                </div>
                <div class="browser-url">
                  <a id="exampleLink" href="" target="_blank">
                    <span id="exampleTitle"></span>
                  </a>
                </div>
              </div>
              <iframe id="exampleFrame" class="example-frame"></iframe>
            </div>
            <div class="example-info">
              <p id="exampleDescription"></p>
              <p>
                or view everything on the
                <a href="https://www.are.na/spencer-chang/playhtml-sites"
                  >community example gallery</a
                >
              </p>
            </div>
          </div>
        </div>
        <script>
          const examples = [
            {
              title: "fridge poetry",
              description: "Create poetry with strangers together in real-time",
              url: "/fridge.html",
            },
            {
              title: "every color [playhtml experiment 04]",
              description: "A website with every color added by someone",
              url: "/experiments/4/",
            },
            {
              title: "one color [playhtml experiment 01]",
              description: "A website with a single color set by someone",
              url: "/experiments/one/",
            },
            {
              title: "cursor party [playhtml experiment 02]",
              description: "See everyone's cursors dancing together",
              url: "/experiments/two/",
            },
            {
              title: "minute faces (together) [playhtml experiment 05]",
              description:
                "Every minute of the day colored by someone at that minute",
              url: "/experiments/5/",
            },
          ];

          let currentIndex = -1;

          function spinRoulette() {
            const frame = document.getElementById("exampleFrame");
            const title = document.getElementById("exampleTitle");
            const description = document.getElementById("exampleDescription");
            const link = document.getElementById("exampleLink");
            const slot = document.getElementById("exampleSlot");

            // Add spinning animation
            slot.classList.add("spinning");

            setTimeout(() => {
              // Pick a different example than current
              let newIndex;
              do {
                newIndex = Math.floor(Math.random() * examples.length);
              } while (newIndex === currentIndex && examples.length > 1);

              currentIndex = newIndex;
              const example = examples[currentIndex];

              frame.src = example.url;
              title.textContent = example.title;
              description.textContent = example.description;
              link.href = example.url;

              slot.classList.remove("spinning");
            }, 600);
          }

          const slotHandle = document.getElementById("slotHandle");
          slotHandle.onclick = () => {
            // Animate handle pull with rotation
            slotHandle.classList.add("pulling");
            setTimeout(() => {
              slotHandle.classList.remove("pulling");
            }, 300);
            spinRoulette();
          };

          // Load first example on page load
          spinRoulette();
        </script>

        <!-- candle credit: https://nyknck.itch.io/candle -->
        <img
          can-play
          can-move
          id="customCandle"
          src="/candle-gif.gif"
          class="candle"
        />
        <!-- Set data for custom (can-play) playhtml elements -->
        <!-- IMPORTANT: this data must be set _before_ importing the playhtml library. -->
        <script>
          const candle = document.getElementById("customCandle");
          candle.defaultData = { on: true };
          candle.onClick = (_e, { data, setData }) => {
            setData({ on: !data.on });
          };
          candle.updateElement = ({ element, data }) => {
            element.src = data.on ? "/candle-gif.gif" : "/candle-off.png";
          };
          candle.resetShortcut = "shiftKey";
        </script>

        <p>
          I'd love for you to try this out and make your websites
          collaboratively interactive and feel <i>alive</i> like a lot of
          physical spaces do. If you do make something,
          <a href="mailto:playhtml@spencer.place">message me</a> or join the
          community on <a href="https://discord.gg/SKbsSf4ptU">discord</a>!
        </p>
        <div class="startContainer">
          <a href="https://github.com/spencerc99/playhtml" target="_blank"
            ><button id="start">Get Started</button></a
          >
        </div>
        <details>
          <summary><h3 style="display: inline">the lore</h3></summary>
          <p>
            This project started out as a way to explore how I could make
            collective interactive design more accessible to people who just
            know basic HTML and CSS and create weird, personal internet sites
            (see <a href="https://html.energy">html.energy</a>). In
            <a href="https://we-b.site/">(we)bsite</a>, we tried out a lot of
            new interaction mechanisms for collective space-making but it
            involved syncing state, creating a database to store history, and
            handling all the nitty gritty of manipulating HTML elements.
          </p>
          <p>
            I hope <b>playhtml</b> helps play a role in making the web a space
            for everyone to shape, change, and maintain.
          </p>
        </details>
        <hr />
        <div id="guestbook">
          <form id="guestbookForm" can-post>
            <input
              class="inline"
              type="text"
              name="name"
              placeholder="your name"
              style="width: 80px"
              required
            />,
            <span>
              leave something nice for visitors in the guestbook, won't
              you?</span
            >

            <br />
            <!-- emoji message -->
            <input
              class="inputMessage"
              type="text"
              name="message"
              placeholder="5 chars max, emojis recommended"
              maxlength="5"
            />
            <button type="submit">üñãÔ∏è</button>
          </form>
          <div id="guestbookMessages"></div>
        </div>
        <script>
          // TODO: convert the guestbook to react and make the hook to make that possible
          function saveName(e) {
            localStorage.setItem("name", JSON.stringify(e.currentTarget.value));
          }

          const nameInput = document.getElementsByName("name")[0];
          nameInput.value = localStorage.getItem("name")
            ? JSON.parse(localStorage.getItem("name"))
            : "";
          nameInput.addEventListener("change", saveName);
        </script>
      </div>
    </div>
    <footer>
      <div>
        an open-source library created and maintained by
        <a href="https://spencer.place/">spencer</a>
      </div>
    </footer>

    <script type="module" src="./index.tsx"></script>
  </body>
</html>
